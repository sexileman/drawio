<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0" version="26.2.13">
  <diagram name="第 1 页" id="EmrIsgRgGEjLNtUeb551">
    <mxGraphModel dx="863" dy="847" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="cmtDE38XpHpKNTGG6hUc-11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="cmtDE38XpHpKNTGG6hUc-1" target="cmtDE38XpHpKNTGG6hUc-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-1" value="exgrForVisaJob启动" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="340" y="40" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="cmtDE38XpHpKNTGG6hUc-4" target="cmtDE38XpHpKNTGG6hUc-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-4" value="SpringApplication&lt;div&gt;传入启动参数&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="335" y="-50" width="130" height="40" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="cmtDE38XpHpKNTGG6hUc-5" target="cmtDE38XpHpKNTGG6hUc-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-5" value="任务ID-msgId&lt;br&gt;&lt;div&gt;任务名称-batchJob&lt;/div&gt;&lt;div&gt;任务时间-batchdate&lt;/div&gt;&lt;div&gt;待处理文件路径-filename&lt;/div&gt;&lt;div style=&quot;&quot;&gt;Job名称-missionName&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="500" y="-70" width="150" height="80" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="cmtDE38XpHpKNTGG6hUc-10" target="cmtDE38XpHpKNTGG6hUc-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-10" value="AtmJobCommandLineRunner" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="310" y="150" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="cmtDE38XpHpKNTGG6hUc-12" target="cmtDE38XpHpKNTGG6hUc-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-19" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="cmtDE38XpHpKNTGG6hUc-14">
          <mxGeometry x="-0.2023" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-57" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="cmtDE38XpHpKNTGG6hUc-12" target="cmtDE38XpHpKNTGG6hUc-56">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-58" value="异常" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="cmtDE38XpHpKNTGG6hUc-57">
          <mxGeometry x="-0.1636" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-12" value="检查是否有相同任务正在运行" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="340" y="260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-13" value="启动exgrForVisaJob" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="315" y="370" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-17" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="cmtDE38XpHpKNTGG6hUc-16" target="cmtDE38XpHpKNTGG6hUc-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-16" value="调用missionDao.isRunning方法&lt;div&gt;参数：batchDate、missionName、filename、&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;missionStatus（默认1-处理中）&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;任务日志表：tb_clm_mission_log&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="50" y="255" width="240" height="70" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-22" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="cmtDE38XpHpKNTGG6hUc-20" target="cmtDE38XpHpKNTGG6hUc-21">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-20" value="exchangerateForVisaReader" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1040" y="40" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-30" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="cmtDE38XpHpKNTGG6hUc-21">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1260" y="169.9999999999999" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-31" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="cmtDE38XpHpKNTGG6hUc-30">
          <mxGeometry x="-0.1945" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-34" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="cmtDE38XpHpKNTGG6hUc-21" target="cmtDE38XpHpKNTGG6hUc-33">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-35" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="cmtDE38XpHpKNTGG6hUc-34">
          <mxGeometry x="-0.2333" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-21" value="校验会计日期的上一日期&lt;div&gt;与文件名截取日期是否匹配&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1047.5" y="150" width="155" height="40" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-32" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" target="cmtDE38XpHpKNTGG6hUc-21">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1010" y="155.0000000000001" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-23" value="从文件路径截取日期" style="text;html=1;align=right;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="890" y="140" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-28" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" target="cmtDE38XpHpKNTGG6hUc-21">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1010" y="190.00000000000023" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-26" value="cutDao.getPrevstlmDateStr()&lt;div&gt;表：tb_clm_bat_cut_ctl&lt;/div&gt;" style="text;html=1;align=right;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="830" y="170" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-29" value="不匹配抛出异常结束" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1250" y="150" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-49" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="cmtDE38XpHpKNTGG6hUc-33" target="cmtDE38XpHpKNTGG6hUc-48">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-33" value="通过文件路径加载资源&lt;div&gt;设置编码GBK&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1047.5" y="240" width="155" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-50" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" target="cmtDE38XpHpKNTGG6hUc-33">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="990" y="270" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-41" value="设置文件处理相关内容&lt;div&gt;字段分隔符|+|等&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=right;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="740" y="240" width="250" height="39.38" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-48" value="处理文件内容，映射到&lt;div&gt;结汇汇率信息实体类&lt;/div&gt;&lt;div&gt;TbWksdExchangeRate.class&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1032.5" y="340" width="185" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-52" value="curCode-币种&lt;div&gt;netAmt-金额&lt;/div&gt;&lt;div&gt;dateTime-生效日期&lt;/div&gt;&lt;div&gt;feBuy-现汇买入价&lt;/div&gt;&lt;div&gt;fcBuy-现钞买入价&lt;/div&gt;&lt;div&gt;feSell-现汇卖出价&lt;/div&gt;&lt;div&gt;fcSell-现钞卖出价&lt;/div&gt;&lt;div&gt;inBuy-内部买入价&lt;/div&gt;&lt;div&gt;inSell-内部卖出价&lt;/div&gt;" style="text;html=1;align=right;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="840" y="270" width="150" height="140" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-55" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="cmtDE38XpHpKNTGG6hUc-53" target="cmtDE38XpHpKNTGG6hUc-54">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-53" value="ExchangerateForVisaProcessor" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1430" y="40" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-54" value="对每条记录做处理&lt;div&gt;dataType-数据类型（01-Visa 02-Master）&lt;/div&gt;&lt;div&gt;accDt-会计日期&lt;/div&gt;&lt;div&gt;lastUpdTm-最后更新日期&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1413.75" y="150" width="242.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-56" value="更新任务日志表&lt;span style=&quot;text-align: left;&quot;&gt;tb_clm_mission_log&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;text-align: left;&quot;&gt;missionStatus(2-失败)&lt;/span&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="515" y="260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-62" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="cmtDE38XpHpKNTGG6hUc-59" target="cmtDE38XpHpKNTGG6hUc-61">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-59" value="AtmJobListener.beforeJob&lt;div&gt;在Job任务执行先更新状态&lt;/div&gt;&lt;div&gt;tb_clm_mission_log&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="640" y="40" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-60" value="任务日志表tb_clm_mission_log数据来源：&lt;div&gt;通过MQ获取，具体处理见HttpMqController&lt;/div&gt;&lt;div&gt;获取处理T-1的文件（状态0-初始态）&lt;/div&gt;&lt;div&gt;这里做一个记录&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="600" y="-170" width="390" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-65" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="cmtDE38XpHpKNTGG6hUc-61" target="cmtDE38XpHpKNTGG6hUc-64">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-61" value="更新日志记录状态&lt;div&gt;1-处理中&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="675" y="140" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-68" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="cmtDE38XpHpKNTGG6hUc-64" target="cmtDE38XpHpKNTGG6hUc-67">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-64" value="根据文件路径判断是否需要更新接收文件处理表&lt;div&gt;tb_clm_trans_file_mission&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="663.75" y="255" width="142.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-67" value="更新字段：&lt;div&gt;missionId-任务ID&lt;/div&gt;&lt;div&gt;clrDt-清算日期&lt;/div&gt;&lt;div&gt;updateTime-更新日期&lt;/div&gt;&lt;div&gt;missionName-任务名&lt;/div&gt;&lt;div&gt;transFile-文件名&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="667.5" y="370" width="135" height="90" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-70" value="接收文件处理表&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;tb_clm_trans_file_mission数据来源：&lt;/span&gt;&lt;div&gt;大概是在eftp接收文件后会存&lt;/div&gt;&lt;div&gt;默认状态（0-初始态，这是猜的）&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="667.5" y="-60" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-74" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="cmtDE38XpHpKNTGG6hUc-72" target="cmtDE38XpHpKNTGG6hUc-73">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-72" value="ExchangerateForVisaWriter" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1790" y="40" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-73" value="将前面读取处理后的数据，批量保存到&lt;div&gt;结汇汇率信息表tb_wskd_exchange_rate&lt;/div&gt;&lt;div&gt;tbWksdExchangeRateMapper.batchInsert()方法&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1755" y="150" width="280" height="80" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-76" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="cmtDE38XpHpKNTGG6hUc-1" target="cmtDE38XpHpKNTGG6hUc-59">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="740" y="140" as="sourcePoint" />
            <mxPoint x="790" y="90" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-86" value="执行Job之前" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="cmtDE38XpHpKNTGG6hUc-76">
          <mxGeometry x="0.0259" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-77" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="cmtDE38XpHpKNTGG6hUc-59" target="cmtDE38XpHpKNTGG6hUc-20">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="740" y="140" as="sourcePoint" />
            <mxPoint x="790" y="90" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-87" value="读文件" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="cmtDE38XpHpKNTGG6hUc-77">
          <mxGeometry x="0.0254" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-78" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="cmtDE38XpHpKNTGG6hUc-20" target="cmtDE38XpHpKNTGG6hUc-53">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1000" y="140" as="sourcePoint" />
            <mxPoint x="1050" y="90" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-88" value="处理读取的数据" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="cmtDE38XpHpKNTGG6hUc-78">
          <mxGeometry x="0.091" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-79" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="cmtDE38XpHpKNTGG6hUc-53" target="cmtDE38XpHpKNTGG6hUc-72">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1720" y="140" as="sourcePoint" />
            <mxPoint x="1770" y="90" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-89" value="保存落库" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="cmtDE38XpHpKNTGG6hUc-79">
          <mxGeometry x="0.1182" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-84" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="cmtDE38XpHpKNTGG6hUc-83" target="cmtDE38XpHpKNTGG6hUc-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-85" value="开始启动" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="cmtDE38XpHpKNTGG6hUc-84">
          <mxGeometry x="-0.1487" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-83" value="触发Job" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="90" y="40" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-92" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="cmtDE38XpHpKNTGG6hUc-90" target="cmtDE38XpHpKNTGG6hUc-91">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-90" value="AtmJobListener.afterJob&lt;div&gt;在Job任务执行完之后更新&lt;/div&gt;&lt;div&gt;tb_clm_mission_log状态&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2120" y="40" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-96" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="cmtDE38XpHpKNTGG6hUc-91" target="cmtDE38XpHpKNTGG6hUc-93">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-91" value="根据JobException返回的状态判断&lt;div&gt;UNKNOWN、EXECUTING、COMPLETED、NOOP、FAILED、STOPPED&lt;/div&gt;&lt;div&gt;只有状态等于COMPLETED，记录状态更新为3-成功，其他都记为2-失败&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2103.75" y="150" width="262.5" height="80" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-98" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="cmtDE38XpHpKNTGG6hUc-93" target="cmtDE38XpHpKNTGG6hUc-97">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-93" value="更新接收文件处理表&lt;div&gt;tb_clm_trans_file_mission&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2146.88" y="285" width="176.25" height="40" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-97" value="更新字段：&lt;div&gt;fileProcSta-文件处理状态（2）&lt;/div&gt;&lt;div&gt;当状态等于COMPLETED时，fileStatus-文件状态=1，否者等于2&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="2088.75" y="380" width="292.49" height="60" as="geometry" />
        </mxCell>
        <mxCell id="cmtDE38XpHpKNTGG6hUc-99" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="cmtDE38XpHpKNTGG6hUc-72" target="cmtDE38XpHpKNTGG6hUc-90">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2160" as="sourcePoint" />
            <mxPoint x="2210" y="-50" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
